<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>주문 관리 - Admin</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <link rel="stylesheet" th:href="@{/css/admin.css}">
</head>
<body>
<th:block
        th:replace="~{fragments/layout :: commonHeader(${user} ?: ${session.user}, ${cartCount}, null, null, false)}"></th:block>

<div class="admin-container">
    <th:block th:replace="~{fragments/admin :: adminSidebar('orders')}"></th:block>

    <main class="admin-content">
        <div class="admin-header">
            <h2>주문 관리</h2>
            <span class="muted">관리자용 주문 목록 페이지 (API 연동 예정)</span>
        </div>

        <div style="color: red; margin-bottom: 12px; background: #fffbeb; padding: 10px; border: 1px solid #f5d7a7; border-radius: 8px;"
             th:if="${error != null}" th:text="${error}">주문 목록을 불러오지 못했습니다.</div>

        <div class="muted" style="padding: 1rem 0;"
             th:if="${orders == null or #lists.isEmpty(orders)}">
            주문 목록 데이터가 없습니다. 추후 관리자 주문 API 연동 후 표시됩니다.
        </div>

        <div th:if="${orders != null and !#lists.isEmpty(orders)}">
            <table class="admin-table header-center">
                <thead>
                <tr>
                    <th>주문번호</th>
                    <th>주문자</th>
                    <th>상태</th>
                    <th>주문일시</th>
                    <th>금액</th>
                    <th>관리</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="o : ${orders}">
                    <td th:text="${o.orderNumber}">ORD-0000</td>
                    <td th:text="${o.userName != null ? o.userName : '-'}">홍길동</td>
                    <td th:text="${o.orderStatus != null ? o.orderStatus : '-'}">COMPLETED</td>
                    <td th:text="${o.orderDateTime != null ? o.orderDateTime : '-'}">2025-01-01</td>
                    <td th:text="${o.totalAmount != null ? #numbers.formatInteger(o.totalAmount, 0, 'COMMA') + '원' : '-'}">0원</td>
                    <td><a class="btn-ghost-link" th:href="@{'/orders/' + ${o.orderNumber} + '/page'}">상세</a></td>
                </tr>
                </tbody>
            </table>
        </div>
    </main>
</div>

<th:block th:replace="~{fragments/layout :: commonFooter}"></th:block>
</body>
</html>
