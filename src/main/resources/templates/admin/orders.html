<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>주문 관리 - Admin</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <link rel="stylesheet" th:href="@{/css/admin.css}">
    <link rel="stylesheet" th:href="@{/css/admin-order-list.css}">
    <script th:src="@{/js/admin-order-list.js}"></script>
</head>
<body>
<th:block
        th:replace="~{fragments/layout :: commonHeader(${user} ?: ${session.user}, ${cartCount}, null, null, false)}"></th:block>

<div class="admin-container">
    <th:block th:replace="~{fragments/admin :: adminSidebar('orders')}"></th:block>

    <main class="admin-content">
        <div class="admin-header">
            <h2>주문 관리</h2>
            <span class="muted">관리자용 주문 목록 페이지 (API 연동 예정)</span>
        </div>

        <div style="color: red; margin-bottom: 12px; background: #fffbeb; padding: 10px; border: 1px solid #f5d7a7; border-radius: 8px;"
             th:if="${error != null}" th:text="${error}">주문 목록을 불러오지 못했습니다.</div>

        <div class="muted" style="padding: 1rem 0;"
             th:if="${orderList == null or #lists.isEmpty(orderList)}">
            주문 목록 데이터가 없습니다.
        </div>

        <div th:if="${orderList != null and !#lists.isEmpty(orderList)}">
            <table class="admin-table header-center">
                <thead>
                <tr>
                    <th>주문번호</th>
                    <th>대표 상품</th>
                    <th>상태</th>
                    <th>주문일시</th>
                    <th>금액</th>
                    <th>관리</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="o : ${orderList}">
                    <!-- 주문번호 -->
                    <td th:text="${o.orderNumber}">ORD-0000</td>

                    <!-- 대표 상품명 -->
                    <td th:text="${o.orderTitle != null ? o.orderTitle : '-'}">
                        대표 상품명
                    </td>

                    <!-- 주문 상태 -->
                    <td th:text="${o.orderStatus.getDescription()}">COMPLETED</td>

                    <!-- 주문일시 (포맷) -->
                    <td th:text="${o.orderDateTime != null
                        ? #temporals.format(o.orderDateTime, 'yyyy-MM-dd HH:mm')
                        : '-'}">
                        2025-01-01 12:00
                    </td>

                    <!-- 결제 금액 -->
                    <td th:text="${#numbers.formatInteger(o.totalAmount, 0, 'COMMA')} + '원'">
                        0원
                    </td>

                    <!-- 상세 -->
                    <td>
                        <a class="btn-ghost-link"
                           th:href="@{'/admin/orders/' + ${o.orderNumber}}">
                            상세
                        </a>
                    </td>
                </tr>
                </tbody>
            </table>

        <div class="pagination-container"
             th:data-current-page="${currentPage}"
             th:data-total-pages="${totalPages}">
            <div class="pagination-buttons">
                    <button id="prevBtn">이전</button>
                    <span id="pageNumbers"></span>
                    <button id="nextBtn">다음</button>
                </div>

                <div class="pagination-input">
                    <input type="number" id="pageInput" min="1" th:value="${currentPage}">
                    <span>/</span>
                    <span id="totalPageText" th:text="${totalPages}">1</span>
                    <button id="moveBtn">이동</button>
                </div>
            </div>


        </div>
    </main>
</div>

<th:block th:replace="~{fragments/layout :: commonFooter}"></th:block>
</body>
</html>
