<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko"
      th:replace="layout/mypage-layout :: layout(
        title = ~{::title},
        sidebarActive = 'addresses',
        content = ~{::content}
      )">

<head>
    <meta charset="UTF-8">
    <title th:text="${isUpdate} ? '배송지 수정' : '새 배송지 추가'"></title>
</head>

<body>

<div th:fragment="content">

    <h2 th:text="${isUpdate} ? '배송지 수정' : '새 배송지 추가'"></h2>

    <div th:if="${error}" class="error-box" th:text="${error}"></div>

    <!-- 수정 폼 -->
    <form th:if="${isUpdate}"
          th:object="${addressForm}"
          th:action="@{/users/me/addresses/{id}/update(id=${addressId})}"
          method="post">

        <div class="form-field">
            <label>배송지 이름</label>
            <label>
                <input type="text" th:field="*{userAddressName}" required>
            </label>
        </div>

        <div class="form-field">
            <label>받는 사람</label>
            <label>
                <input type="text" th:field="*{recipient}" required>
            </label>
        </div>

        <div class="form-field">
            <label>연락처</label>
            <label>
                <input type="text" th:field="*{phone}" required>
            </label>
        </div>

        <div class="form-field">
            <label>주소</label>
            <label>
                <input type="text" th:field="*{zipCode}" placeholder="우편번호">
            </label>
            <label>
                <input type="text" th:field="*{userAddress}" placeholder="도로명 주소">
            </label>
            <label>
                <input type="text" th:field="*{userAddressDetail}" placeholder="상세 주소">
            </label>
        </div>

        <div class="form-field">
            <label>
                <input type="checkbox" th:field="*{isDefault}">
                기본 배송지로 설정
            </label>
        </div>

        <div class="form-actions">
            <a href="/users/me/addresses" class="btn-cancel">취소</a>
            <button type="submit" class="submit-btn">수정하기</button>
        </div>

    </form>

    <!-- 신규 폼 -->
    <form th:unless="${isUpdate}"
          th:object="${addressForm}"
          th:action="@{/users/me/addresses}"
          method="post">

        <div class="form-field">
            <label>배송지 이름</label>
            <label>
                <input type="text" th:field="*{userAddressName}" required>
            </label>
        </div>

        <div class="form-field">
            <label>받는 사람</label>
            <label>
                <input type="text" th:field="*{recipient}" required>
            </label>
        </div>

        <div class="form-field">
            <label>연락처</label>
            <label>
                <input type="text" th:field="*{phone}" required>
            </label>
        </div>

        <div class="form-field">
            <label>주소</label>
            <label>
                <input type="text" th:field="*{zipCode}" placeholder="우편번호">
            </label>
            <label>
                <input type="text" th:field="*{userAddress}" placeholder="도로명 주소">
            </label>
            <label>
                <input type="text" th:field="*{userAddressDetail}" placeholder="상세 주소">
            </label>
        </div>

        <div class="form-field">
            <label>
                <input type="checkbox" th:field="*{isDefault}"> 기본 배송지로 설정
            </label>
        </div>

        <div class="form-actions">
            <a href="/users/me/addresses" class="btn-cancel">취소</a>
            <button type="submit" class="submit-btn">등록하기</button>
        </div>

    </form>

</div>

</body>
</html>
