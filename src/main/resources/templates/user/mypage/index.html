<!DOCTYPE html>
<html lang="ko" th:replace="~{layout/mypage-layout :: layout(
        title = ~{::title},
        sidebarActive = 'dashboard',
        content = ~{::content}
      )}"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <!--    <title>마이페이지 대시보드</title>-->
</head>

<body>
<div th:fragment="content">
    <div class="dashboard-header">
        <h2>마이페이지 대시보드</h2>
        <p class="muted">내 활동을 한 눈에 확인하세요.</p>
    </div>

    <div class="card-grid quick-stats">
        <a class="dashboard-card link-card info-card" th:href="@{/users/me/edit}">
            <div class="card-head">
                <span class="card-label">내 정보</span>
                <span class="card-link">정보 수정 →</span>
            </div>
            <p class="stat-value" th:text="${user.name}">이름</p>
            <p class="subtext" th:text="${user.email}">email@example.com</p>
        </a>

        <a class="dashboard-card link-card coupon-card" th:href="@{/users/me/coupons}">
            <div class="card-head">
                <span class="card-label">보유 쿠폰</span>
                <span class="card-link">쿠폰함 →</span>
            </div>
            <p class="stat-value" th:text="${couponCount} + '개'">0개</p>
            <p class="subtext">사용 가능한 쿠폰을 확인해보세요.</p>
        </a>

        <a class="dashboard-card link-card order-status-card" th:href="@{/orders/me}">
            <div class="card-head">
                <span class="card-label">주문 현황</span>
                <span class="card-link">주문 내역 →</span>
            </div>
            <div class="order-status-list">
                <div class="order-status-row">
                    <span class="status-dot in-transit"></span>
                    <span>배송 중</span>
                    <span class="status-count"
                          th:text="${orderStatusSummary != null ? orderStatusSummary.inTransit : 0} + '건'">0건</span>
                </div>
                <div class="order-status-row">
                    <span class="status-dot delivered"></span>
                    <span>배송 완료</span>
                    <span class="status-count"
                          th:text="${orderStatusSummary != null ? orderStatusSummary.delivered : 0} + '건'">0건</span>
                </div>
            </div>
        </a>

        <a class="dashboard-card link-card order-total-card" th:href="@{/orders/me}">
            <div class="card-head">
                <span class="card-label">총 주문 수</span>
                <span class="card-link">내역 보기 →</span>
            </div>
            <p class="stat-value" th:text="${orderCount} + '건'">0건</p>
            <p class="subtext">모든 주문 내역을 확인하세요.</p>
        </a>

        <a class="dashboard-card link-card point-card" th:href="@{/user/me/points}">
            <div class="card-head">
                <span class="card-label">포인트 현황</span>
                <span class="card-link">포인트 내역 →</span>
            </div>
            <p class="stat-value"
               th:text="${user.point != null ? #numbers.formatInteger(user.point, 0) : 0} + ' P'">0 P</p>
            <p class="subtext">적립/사용 내역을 확인하세요.</p>
        </a>
    </div>

    <a class="dashboard-card link-card review-card" th:href="@{/users/me/reviews}">
        <div class="card-head">
            <span class="card-label">최근 리뷰</span>
            <span class="card-link">내 리뷰 →</span>
        </div>

        <div th:if="${recentReviews == null or #lists.isEmpty(recentReviews)}">
            <p class="muted">최근 작성한 리뷰가 없습니다.</p>
        </div>

        <div class="review-preview" th:each="review : ${recentReviews}">
            <div class="review-title" th:text="${review.bookTitle}">도서 제목</div>
            <div class="review-content" th:text="${review.content}">리뷰 내용이 표시됩니다.</div>
            <div class="review-meta">
                <span class="star" th:text="'★ ' + ${review.rating}">★ 0</span>
            </div>
        </div>
    </a>

</div>
</body>
</html>
