<!DOCTYPE html>
<html lang="ko" th:replace="~{layout/mypage-layout :: layout(
        title = ~{::title},
        sidebarActive = 'addresses',
        content = ~{::content},
        extraHead = ~{::extraHead}
      )}"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <title>배송지 관리</title>
    <th:block th:fragment="extraHead"></th:block>
</head>

<body>
<div th:fragment="content">

    <h2>주소 목록 관리</h2>

    <a class="add-address-btn" href="/users/me/addresses/new">+ 새 주소 추가</a>

    <p class="empty-text" th:if="${#lists.isEmpty(addresses)}">등록된 배송지가 없습니다.</p>

    <div class="address-card" th:each="addr : ${addresses}">

        <h4 th:text="${addr.userAddressName}"></h4>

        <p>
            <strong th:text="${addr.recipient}"></strong>
            <span th:text="'(' + ${addr.phone} + ')'"></span>
        </p>

        <p>
            (<span th:text="${addr.zipCode}"></span>)
            <span th:text="${addr.userAddress}"></span>
            <span th:text="${addr.userAddressDetail}"></span>
        </p>

        <span class="default-badge" th:if="${addr.isDefault}">✔ 기본 배송지</span>

        <div class="address-actions">
            <a class="btn-edit"
               th:href="@{'/users/me/addresses/' + ${addr.addressId} + '/edit'}">수정</a>

            <form method="post"
                  th:action="@{'/users/me/addresses/' + ${addr.addressId} + '/delete'}">
                <button class="btn-delete">삭제</button>
            </form>
        </div>

    </div>

</div>
</body>
</html>
