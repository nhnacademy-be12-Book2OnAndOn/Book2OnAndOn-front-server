<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko"
      th:replace="~{layout/mypage-layout :: layout(
        title = ~{::title},
        sidebarActive = 'addresses',
        content = ~{::content}
      )}">

<head>
    <title>내 주소 관리</title>
</head>

<body>
<div th:fragment="content">

    <h2>내 주소 관리</h2>

    <a href="/users/me/addresses/new" class="add-address-btn">+ 새 주소 추가</a>

    <p th:if="${#lists.isEmpty(addresses)}" class="empty-text">등록된 배송지가 없습니다.</p>

    <div th:each="addr : ${addresses}" class="address-card">

        <h4 th:text="${addr.userAddressName}"></h4>

        <p>
            <strong th:text="${addr.recipient}"></strong>
            <span th:text="'(' + ${addr.phone} + ')'"></span>
        </p>

        <p>
            (<span th:text="${addr.zipCode}"></span>)
            <span th:text="${addr.userAddress}"></span>
            <span th:text="${addr.userAddressDetail}"></span>
        </p>

        <span th:if="${addr.isDefault}" class="default-badge">✔ 기본 배송지</span>

        <div class="address-actions">
            <a th:href="@{'/users/me/addresses/' + ${addr.addressId} + '/edit'}"
               class="btn-edit">수정</a>

            <form th:action="@{'/users/me/addresses/' + ${addr.addressId} + '/delete'}"
                  method="post">
                <button class="btn-delete">삭제</button>
            </form>
        </div>

    </div>

</div>
</body>
</html>
