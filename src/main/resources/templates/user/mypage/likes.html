<!DOCTYPE html>
<html lang="ko" th:replace="~{layout/mypage-layout :: layout(
        title = ~{::title},
        sidebarActive = 'likes',
        content = ~{::content},
        extraHead = ~{::extraHead}
      )}"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <title>마이페이지 - 좋아요 도서</title>
    <th:block th:fragment="extraHead"></th:block>
</head>

<body>
<div class="mypage-content likes-page" th:fragment="content">
    <div class="dashboard-header">
        <h2>마음에 담은 책</h2>
        <p class="muted">
            <span th:text="${(user != null && user.nickname != null) ? user.nickname : '회원'}"></span>님이 좋아요를 누른 도서들을 한
            눈에 확인하세요.
        </p>
    </div>

    <div class="liked-empty" th:if="${books == null or books.isEmpty()}">
        <p>아직 <span th:text="${(user != null && user.nickname != null) ? user.nickname : '회원'}"></span>님의 마음에 담긴 책이 없어요.
        </p>
        <a class="liked-btn-verify" href="/">마음에 담을 책 찾으러 가기</a>
    </div>

    <div th:unless="${books == null or books.isEmpty()}">
        <div class="liked-grid">
            <a class="liked-card" th:each="item : ${books}"
               th:href="@{/books/{bookId}(bookId=${item.bookInfo.id})}">
                <div class="liked-thumb">
                    <img alt="도서 이미지"
                         th:src="${item.bookInfo.imagePath != null ? item.bookInfo.imagePath : '/images/no-image.png'}">
                </div>
                <div class="liked-body">
                    <h5 class="liked-title" th:text="${item.bookInfo.title}">도서 제목</h5>
                    <p class="liked-authors">
                        <span th:each="author, iterStat : ${item.bookInfo.contributorNames}">
                            <span th:text="${author}">저자</span><span th:if="${!iterStat.last}">, </span>
                        </span>
                    </p>
                    <div class="liked-price">
                        <span class="price-sale"
                              th:text="${#numbers.formatInteger(item.bookInfo.priceSales, 0, 'COMMA') + '원'}">0원</span>
                        <span class="price-origin"
                              th:if="${item.bookInfo.priceStandard > item.bookInfo.priceSales}"
                              th:text="${#numbers.formatInteger(item.bookInfo.priceStandard, 0, 'COMMA') + '원'}">0원</span>
                    </div>
                    <div class="liked-meta" th:text="'찜한 날짜 · ' + ${#temporals.format(item.createdAt, 'yyyy-MM-dd')}">
                        2024-01-01
                    </div>
                </div>
            </a>
        </div>

        <div class="page-nav" th:if="${totalPages > 0}">
            <a aria-label="이전" class="page-btn" th:classappend="${currentPage == 0} ? 'disabled'"
               th:href="@{/users/me/likes(page=${currentPage - 1})}">이전</a>

            <div class="page-numbers">
                <a class="page-btn"
                   th:classappend="${pageNum == currentPage} ? 'active'"
                   th:each="pageNum : ${#numbers.sequence(0, totalPages - 1)}"
                   th:href="@{/users/me/likes(page=${pageNum})}"
                   th:text="${pageNum + 1}">1</a>
            </div>

            <a aria-label="다음" class="page-btn" th:classappend="${currentPage == totalPages - 1} ? 'disabled'"
               th:href="@{/users/me/likes(page=${currentPage + 1})}">다음</a>
        </div>
    </div>
</div>
</body>
</html>
