<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë‚´ ë°˜í’ˆ ë‚´ì—­ - Book2OnAndOn</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      background: #4A7C59;
      color: white;
      padding: 25px 30px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(74, 124, 89, 0.3);
      margin-bottom: 30px;
    }

    header h1 {
      font-size: 1.8em;
      margin-bottom: 5px;
    }

    header p {
      opacity: 0.9;
      font-size: 0.95em;
    }

    .nav-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .tab-btn {
      background: white;
      border: 2px solid #4A7C59;
      color: #4A7C59;
      padding: 12px 25px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1em;
      font-weight: 600;
      transition: all 0.3s ease;
      text-decoration: none;
    }

    .tab-btn:hover {
      background: #e8f5e9;
      transform: translateY(-2px);
    }

    .tab-btn.active {
      background: #4A7C59;
      color: white;
      box-shadow: 0 5px 15px rgba(74, 124, 89, 0.4);
    }

    .card {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 3px solid #4A7C59;
    }

    .card-header h2 {
      color: #4A7C59;
      font-size: 1.5em;
    }

    .btn {
      background: #4A7C59;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      font-size: 0.95em;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }

    .btn:hover {
      background: #3d6549;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(74, 124, 89, 0.3);
    }

    .filters {
      display: flex;
      gap: 15px;
      margin-bottom: 25px;
      flex-wrap: wrap;
      align-items: flex-end;
    }

    .filter-group {
      flex: 1;
      min-width: 150px;
    }

    .filter-group label {
      display: block;
      font-size: 0.9em;
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
    }

    .filter-group select,
    .filter-group input {
      width: 100%;
      padding: 10px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 0.95em;
      transition: border-color 0.3s;
    }

    .filter-group select:focus,
    .filter-group input:focus {
      outline: none;
      border-color: #4A7C59;
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #666;
    }

    .empty-state-icon {
      font-size: 4em;
      margin-bottom: 20px;
      opacity: 0.3;
    }

    .empty-state h3 {
      font-size: 1.3em;
      margin-bottom: 10px;
      color: #333;
    }

    .empty-state p {
      margin-bottom: 25px;
      line-height: 1.6;
    }

    .refund-list {
      display: grid;
      gap: 20px;
    }

    .refund-item {
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 25px;
      transition: all 0.3s ease;
      background: #fafafa;
    }

    .refund-item:hover {
      border-color: #4A7C59;
      box-shadow: 0 5px 20px rgba(74, 124, 89, 0.15);
      transform: translateY(-2px);
    }

    .refund-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #e0e0e0;
    }

    .refund-id {
      font-size: 1.2em;
      font-weight: bold;
      color: #4A7C59;
    }

    .refund-date {
      color: #666;
      font-size: 0.9em;
    }

    .status-badge {
      display: inline-block;
      padding: 6px 15px;
      border-radius: 20px;
      font-size: 0.9em;
      font-weight: 600;
    }

    .status-pending {
      background: #fff3cd;
      color: #856404;
    }

    .status-approved {
      background: #d4edda;
      color: #155724;
    }

    .status-rejected {
      background: #f8d7da;
      color: #721c24;
    }

    .status-completed {
      background: #d1ecf1;
      color: #0c5460;
    }

    .refund-body {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .info-item {
      display: flex;
      flex-direction: column;
    }

    .info-label {
      font-size: 0.85em;
      color: #666;
      margin-bottom: 5px;
    }

    .info-value {
      font-weight: 600;
      color: #333;
      font-size: 1em;
    }

    .refund-reason {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    .refund-reason .info-label {
      margin-bottom: 8px;
    }

    .refund-reason .info-value {
      line-height: 1.6;
      font-weight: normal;
    }

    .action-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn-sm {
      padding: 8px 20px;
      font-size: 0.9em;
    }

    .btn-secondary {
      background: #6c757d;
    }

    .btn-secondary:hover {
      background: #5a6268;
    }

    .btn-danger {
      background: #dc3545;
    }

    .btn-danger:hover {
      background: #c82333;
    }

    .btn-outline {
      background: white;
      color: #4A7C59;
      border: 2px solid #4A7C59;
    }

    .btn-outline:hover {
      background: #4A7C59;
      color: white;
    }

    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-top: 30px;
    }

    .pagination button {
      padding: 10px 20px;
      border: 2px solid #4A7C59;
      background: white;
      color: #4A7C59;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s;
    }

    .pagination button:hover:not(:disabled) {
      background: #4A7C59;
      color: white;
    }

    .pagination button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    .page-info {
      padding: 0 15px;
      font-weight: 600;
      color: #333;
    }

    /* ëª¨ë‹¬ */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      background: white;
      border-radius: 15px;
      padding: 30px;
      max-width: 600px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      animation: modalSlide 0.3s;
    }

    @keyframes modalSlide {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #4A7C59;
    }

    .modal-header h3 {
      color: #4A7C59;
      font-size: 1.4em;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 1.5em;
      cursor: pointer;
      color: #666;
      padding: 0;
      width: 30px;
      height: 30px;
    }

    .close-btn:hover {
      color: #333;
    }

    @media (max-width: 768px) {
      .filters {
        flex-direction: column;
      }

      .filter-group {
        width: 100%;
      }

      .refund-body {
        grid-template-columns: 1fr;
      }

      .action-buttons {
        flex-direction: column;
      }

      .action-buttons button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
<div class="container">
  <header>
    <h1>ğŸ“¦ ë§ˆì´í˜ì´ì§€</h1>
    <p>ë‚˜ì˜ ë°˜í’ˆ ë‚´ì—­ì„ í™•ì¸í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”</p>
  </header>

<!--  <div class="nav-tabs">-->
<!--    <a href="#" class="tab-btn">ì£¼ë¬¸ ë‚´ì—­</a>-->
<!--    <a href="#" class="tab-btn active">ë°˜í’ˆ ë‚´ì—­</a>-->
<!--    <a href="#" class="tab-btn">ë¬¸ì˜ ë‚´ì—­</a>-->
<!--    <a href="#" class="tab-btn">íšŒì› ì •ë³´</a>-->
<!--  </div>-->

  <div class="card">
    <div class="card-header">
      <h2>ë‚´ ë°˜í’ˆ ë‚´ì—­</h2>
<!--      <a href="refund_request_form.html" class="btn">+ ë°˜í’ˆ ì‹ ì²­</a>-->
    </div>

    <div class="filters">
      <div class="filter-group">
        <label>ìƒíƒœ</label>
        <select id="filterStatus" onchange="filterRefunds()">
          <option value="">ì „ì²´</option>
          <option value="0">ì²˜ë¦¬ì¤‘</option>
          <option value="1">ìŠ¹ì¸ë¨</option>
          <option value="2">ê±°ë¶€ë¨</option>
          <option value="3">ì™„ë£Œ</option>
        </select>
      </div>
      <div class="filter-group">
        <label>ê¸°ê°„</label>
        <select id="filterPeriod" onchange="filterByPeriod()">
          <option value="all">ì „ì²´</option>
          <option value="1">1ê°œì›”</option>
          <option value="3">3ê°œì›”</option>
          <option value="6">6ê°œì›”</option>
          <option value="12">1ë…„</option>
        </select>
      </div>
      <div class="filter-group">
        <label>ì£¼ë¬¸ë²ˆí˜¸ ê²€ìƒ‰</label>
        <input type="text" id="searchOrder" placeholder="ì£¼ë¬¸ë²ˆí˜¸ ì…ë ¥" onkeyup="searchByOrder()">
      </div>
    </div>

    <div id="refundListContainer">
      <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
    </div>

    <div class="pagination">
      <button id="btnPrev" onclick="changePage(-1)">ì´ì „</button>
      <span class="page-info">
                    <span id="currentPage">1</span> / <span id="totalPages">1</span>
                </span>
      <button id="btnNext" onclick="changePage(1)">ë‹¤ìŒ</button>
    </div>
  </div>
</div>

<!-- ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
<div id="detailModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>ë°˜í’ˆ ìƒì„¸ ì •ë³´</h3>
      <button class="close-btn" onclick="closeModal()">&times;</button>
    </div>
    <div id="modalBody">
      <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
    </div>
  </div>
</div>

<script>
  let currentPage = 1;
  let totalPages = 1;
  let pageSize = 10;
  let allRefunds = [];
  let filteredRefunds = [];

  // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° ë¡œë“œ
  window.onload = function() {
    loadMyRefunds();
  };

  async function loadMyRefunds() {
    try {
      // API í˜¸ì¶œ ì˜ˆì‹œ
      // const response = await fetch(`/api/orders/refunds/list?page=${currentPage - 1}&size=${pageSize}`, {
      //     headers: {
      //         'Authorization': 'Bearer ' + token
      //     }
      // });
      // const data = await response.json();
      // allRefunds = data.content;
      // totalPages = data.totalPages;

      // ì„ì‹œ ë°ì´í„°
      allRefunds = [
        {
          refundId: 1,
          orderNumber: '2025123456789',
          orderId: 101,
          productName: 'í´ë¦° ì½”ë“œ',
          quantity: 2,
          amount: 66000,
          reason: 'ìƒí’ˆ ë¶ˆëŸ‰',
          detailReason: 'ì±…ì— ì–¼ë£©ì´ ìˆìŠµë‹ˆë‹¤',
          requestDate: '2025-12-24',
          status: 0,
          statusText: 'ì²˜ë¦¬ì¤‘'
        },
        {
          refundId: 2,
          orderNumber: '2025123456788',
          orderId: 102,
          productName: 'ë¦¬íŒ©í„°ë§',
          quantity: 1,
          amount: 35000,
          reason: 'ë‹¨ìˆœ ë³€ì‹¬',
          detailReason: 'í•„ìš” ì—†ì–´ì¡ŒìŠµë‹ˆë‹¤',
          requestDate: '2025-11-10',
          status: 1,
          statusText: 'ìŠ¹ì¸ë¨',
          approvedDate: '2025-11-11'
        },
        {
          refundId: 3,
          orderNumber: '2025123456787',
          orderId: 103,
          productName: 'ì´í™í‹°ë¸Œ ìë°”',
          quantity: 1,
          amount: 36000,
          reason: 'ì˜¤ë°°ì†¡',
          detailReason: 'ë‹¤ë¥¸ ìƒí’ˆì´ ë°°ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤',
          requestDate: '2025-02-25',
          status: 3,
          statusText: 'ì™„ë£Œ',
          completedDate: '2025-02-28'
        },
        {
          refundId: 4,
          orderNumber: '2025123456786',
          orderId: 104,
          productName: 'Design Patterns',
          quantity: 1,
          amount: 40000,
          reason: 'ìƒí’ˆ ë¶ˆëŸ‰',
          detailReason: 'ì±… í‘œì§€ê°€ ì°¢ì–´ì ¸ ìˆìŠµë‹ˆë‹¤',
          requestDate: '2024-11-20',
          status: 2,
          statusText: 'ê±°ë¶€ë¨',
          rejectedReason: 'ë°˜í’ˆ ê¸°í•œì´ ì§€ë‚¬ìŠµë‹ˆë‹¤'
        }
      ];

      filteredRefunds = [...allRefunds];
      totalPages = Math.ceil(filteredRefunds.length / pageSize);
      renderRefunds();

    } catch (error) {
      console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
      showEmptyState('ë°˜í’ˆ ë‚´ì—­ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    }
  }

  function renderRefunds() {
    const container = document.getElementById('refundListContainer');

    if (filteredRefunds.length === 0) {
      showEmptyState('ë°˜í’ˆ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.');
      return;
    }

    const start = (currentPage - 1) * pageSize;
    const end = start + pageSize;
    const pageRefunds = filteredRefunds.slice(start, end);

    container.innerHTML = '<div class="refund-list">' +
            pageRefunds.map(refund => createRefundCard(refund)).join('') +
            '</div>';

    document.getElementById('currentPage').textContent = currentPage;
    document.getElementById('totalPages').textContent = totalPages;

    // í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
    document.getElementById('btnPrev').disabled = currentPage === 1;
    document.getElementById('btnNext').disabled = currentPage === totalPages;
  }

  function createRefundCard(refund) {
    const statusClass = getStatusClass(refund.status);

    return `
                <div class="refund-item">
                    <div class="refund-header">
                        <div>
                            <div class="refund-id">ë°˜í’ˆ #${refund.refundId}</div>
                            <div class="refund-date">ì£¼ë¬¸ë²ˆí˜¸: ${refund.orderNumber}</div>
                            <div class="refund-date">ì‹ ì²­ì¼: ${refund.requestDate}</div>
                        </div>
                        <span class="status-badge ${statusClass}">${refund.statusText}</span>
                    </div>

                    <div class="refund-body">
                        <div class="info-item">
                            <span class="info-label">ìƒí’ˆëª…</span>
                            <span class="info-value">${refund.productName}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">ìˆ˜ëŸ‰</span>
                            <span class="info-value">${refund.quantity}ê°œ</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">ë°˜í’ˆ ê¸ˆì•¡</span>
                            <span class="info-value">${refund.amount.toLocaleString()}ì›</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">ë°˜í’ˆ ì‚¬ìœ </span>
                            <span class="info-value">${refund.reason}</span>
                        </div>
                    </div>

                    <div class="refund-reason">
                        <span class="info-label">ìƒì„¸ ì‚¬ìœ </span>
                        <div class="info-value">${refund.detailReason}</div>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-sm btn-outline" onclick="viewDetail(${refund.refundId})">ìƒì„¸ë³´ê¸°</button>
                        ${refund.status === 0 ? `
                            <button class="btn btn-sm btn-danger" onclick="cancelRefund(${refund.refundId})">ì‹ ì²­ ì·¨ì†Œ</button>
                        ` : ''}
                        ${refund.status === 2 ? `
                            <button class="btn btn-sm btn-secondary" onclick="viewRejectionReason(${refund.refundId})">ê±°ë¶€ ì‚¬ìœ </button>
                        ` : ''}
                    </div>
                </div>
            `;
  }

  function getStatusClass(status) {
    const classes = {
      0: 'status-pending',
      1: 'status-approved',
      2: 'status-rejected',
      3: 'status-completed'
    };
    return classes[status] || 'status-pending';
  }

  function showEmptyState(message) {
    const container = document.getElementById('refundListContainer');
    container.innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">ğŸ“­</div>
                    <h3>${message}</h3>
                    <p>ì•„ì§ ë°˜í’ˆ ì‹ ì²­ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.<br>ì£¼ë¬¸ ë‚´ì—­ì—ì„œ ë°˜í’ˆì„ ì‹ ì²­í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    <a href="refund_request_form.html" class="btn">ë°˜í’ˆ ì‹ ì²­í•˜ê¸°</a>
                </div>
            `;
  }

  function filterRefunds() {
    const status = document.getElementById('filterStatus').value;

    if (status === '') {
      filteredRefunds = [...allRefunds];
    } else {
      filteredRefunds = allRefunds.filter(r => r.status === parseInt(status));
    }

    currentPage = 1;
    totalPages = Math.ceil(filteredRefunds.length / pageSize);
    renderRefunds();
  }

  function filterByPeriod() {
    const period = document.getElementById('filterPeriod').value;

    if (period === 'all') {
      filteredRefunds = [...allRefunds];
    } else {
      const months = parseInt(period);
      const cutoffDate = new Date();
      cutoffDate.setMonth(cutoffDate.getMonth() - months);

      filteredRefunds = allRefunds.filter(r => {
        const refundDate = new Date(r.requestDate);
        return refundDate >= cutoffDate;
      });
    }

    currentPage = 1;
    totalPages = Math.ceil(filteredRefunds.length / pageSize);
    renderRefunds();
  }

  function searchByOrder() {
    const keyword = document.getElementById('searchOrder').value.toLowerCase();

    if (keyword === '') {
      filteredRefunds = [...allRefunds];
    } else {
      filteredRefunds = allRefunds.filter(r =>
              r.orderNumber.toLowerCase().includes(keyword)
      );
    }

    currentPage = 1;
    totalPages = Math.ceil(filteredRefunds.length / pageSize);
    renderRefunds();
  }

  function changePage(delta) {
    const newPage = currentPage + delta;
    if (newPage >= 1 && newPage <= totalPages) {
      currentPage = newPage;
      renderRefunds();
    }
  }

  function viewDetail(refundId) {
    const refund = allRefunds.find(r => r.refundId === refundId);
    if (!refund) return;

    const modalBody = document.getElementById('modalBody');
    modalBody.innerHTML = `
                <div class="refund-reason" style="margin-bottom: 20px;">
                    <span class="info-label">ë°˜í’ˆ ìƒíƒœ</span>
                    <div style="margin-top: 10px;">
                        <span class="status-badge ${getStatusClass(refund.status)}">${refund.statusText}</span>
                    </div>
                </div>

                <div class="refund-body" style="margin-bottom: 20px;">
                    <div class="info-item">
                        <span class="info-label">ë°˜í’ˆ ID</span>
                        <span class="info-value">#${refund.refundId}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">ì£¼ë¬¸ë²ˆí˜¸</span>
                        <span class="info-value">${refund.orderNumber}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">ì‹ ì²­ì¼</span>
                        <span class="info-value">${refund.requestDate}</span>
                    </div>
                    ${refund.approvedDate ? `
                        <div class="info-item">
                            <span class="info-label">ìŠ¹ì¸ì¼</span>
                            <span class="info-value">${refund.approvedDate}</span>
                        </div>
                    ` : ''}
                    ${refund.completedDate ? `
                        <div class="info-item">
                            <span class="info-label">ì™„ë£Œì¼</span>
                            <span class="info-value">${refund.completedDate}</span>
                        </div>
                    ` : ''}
                </div>

                <div class="refund-body" style="margin-bottom: 20px;">
                    <div class="info-item">
                        <span class="info-label">ìƒí’ˆëª…</span>
                        <span class="info-value">${refund.productName}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">ìˆ˜ëŸ‰</span>
                        <span class="info-value">${refund.quantity}ê°œ</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">ë°˜í’ˆ ê¸ˆì•¡</span>
                        <span class="info-value">${refund.amount.toLocaleString()}ì›</span>
                    </div>
                </div>

                <div class="refund-reason" style="margin-bottom: 20px;">
                    <span class="info-label">ë°˜í’ˆ ì‚¬ìœ </span>
                    <div class="info-value" style="margin-top: 8px;">${refund.reason}</div>
                </div>

                <div class="refund-reason">
                    <span class="info-label">ìƒì„¸ ì‚¬ìœ </span>
                    <div class="info-value" style="margin-top: 8px;">${refund.detailReason}</div>
                </div>

                ${refund.rejectedReason ? `
                    <div class="refund-reason" style="background: #f8d7da; border: 1px solid #f5c6cb;">
                        <span class="info-label" style="color: #721c24;">ê±°ë¶€ ì‚¬ìœ </span>
                        <div class="info-value" style="margin-top: 8px; color: #721c24;">${refund.rejectedReason}</div>
                    </div>
                ` : ''}
            `;

    document.getElementById('detailModal').classList.add('show');
  }

  async function cancelRefund(refundId) {
    if (!confirm('ë°˜í’ˆ ì‹ ì²­ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

    try {
      // const response = await fetch(`/api/orders/${orderId}/refunds/${refundId}/cancel`, {
      //     method: 'POST',
      //     headers: {
      //         'Authorization': 'Bearer ' + token
      //     }
      // });

      alert('ë°˜í’ˆ ì‹ ì²­ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
      loadMyRefunds();

    } catch (error) {
      alert('ì·¨ì†Œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      console.error(error);
    }
  }

  function viewRejectionReason(refundId) {
    const refund = allRefunds.find(r => r.refundId === refundId);
    if (!refund || !refund.rejectedReason) return;

    alert(`ê±°ë¶€ ì‚¬ìœ :\n\n${refund.rejectedReason}`);
  }

  function closeModal() {
    document.getElementById('detailModal').classList.remove('show');
  }

  // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
  window.onclick = function(event) {
    const modal = document.getElementById('detailModal');
    if (event.target === modal) {
      closeModal();
    }
  }
</script>
</body>
</html>